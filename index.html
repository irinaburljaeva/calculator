<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Калькуляторы ШАГАЙ ДОМА</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --red: #CF2C02;
      --yellow: #FFBA08;
      --bg: #FFFFFF;
      --ink: #222222;
      --ink-soft: #5A5A5A;
      --card-border: #F0F0F0;
      --shadow-soft: 0 18px 45px rgba(0,0,0,0.06);
      --radius-lg: 24px;
      --radius-xl: 32px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--ink);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-wrap {
      width: 100%;
      max-width: 1120px;
      padding: 24px 16px 40px;
      margin: 0 auto;
    }

    .page-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .page-title {
      font-size: 28px;
      line-height: 1.2;
      font-weight: 700;
      margin: 0 0 8px;
    }

    .page-subtitle {
      font-size: 15px;
      color: var(--ink-soft);
      margin: 0;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 20px;
    }

    @media (max-width: 768px) {
      .cards-grid {
        grid-template-columns: 1fr;
      }
      .page-header {
        text-align: left;
      }
      .page-title {
        font-size: 22px;
      }
    }

    .calc-card {
      border-radius: var(--radius-xl);
      border: 1px solid var(--card-border);
      box-shadow: var(--shadow-soft);
      padding: 20px 20px 18px;
      background: #fff;
      cursor: pointer;
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out,
                  border-color 0.15s ease-out;
      position: relative;
      overflow: hidden;
    }

    .calc-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(255,186,8,0.16), transparent 55%);
      opacity: 0;
      transition: opacity 0.2s ease-out;
      pointer-events: none;
    }

    .calc-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 55px rgba(0,0,0,0.08);
      border-color: rgba(207,44,2,0.16);
    }

    .calc-card:hover::before {
      opacity: 1;
    }

    .calc-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      background: rgba(207,44,2,0.06);
      color: var(--red);
      margin-bottom: 10px;
      font-weight: 600;
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--red);
    }

    .calc-title {
      font-size: 20px;
      font-weight: 700;
      margin: 0 0 8px;
    }

    .calc-text {
      font-size: 14px;
      color: var(--ink-soft);
      margin: 0 0 18px;
    }

    .calc-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 18px;
    }

    .tag {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #FFF8E3;
      color: #8A5A02;
      border: 1px solid rgba(255,186,8,0.4);
    }

    .calc-cta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      padding: 9px 14px;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      background: var(--red);
      color: white;
      border: none;
      pointer-events: none; /* вся карточка кликабельна */
    }

    .calc-cta-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--red);
    }

    /* МОДАЛЬНЫЕ ОКНА */

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.30);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.18s ease-out;
      z-index: 40;
    }

    .modal--active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-dialog {
      width: 100%;
      max-width: 620px;
      max-height: 100%;
      background: #fff;
      border-radius: var(--radius-xl);
      box-shadow: 0 26px 80px rgba(0,0,0,0.22);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    @media (max-width: 640px) {
      .modal-dialog {
        border-radius: 20px;
        max-width: 100%;
      }
    }

    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid #F0F0F0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
      margin: 0;
    }

    .modal-subtitle {
      font-size: 12px;
      color: var(--ink-soft);
      margin-top: 2px;
    }

    .modal-close {
      border-radius: 999px;
      border: none;
      background: #F5F5F5;
      width: 32px;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
      color: #555;
      flex-shrink: 0;
      transition: background 0.12s ease-out, transform 0.12s ease-out;
    }

    .modal-close:hover {
      background: #E8E8E8;
      transform: translateY(-1px);
    }

    .modal-body {
      padding: 16px 20px 20px;
      overflow-y: auto;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px 14px;
      margin-bottom: 14px;
    }

    @media (max-width: 540px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    .field label {
      font-weight: 500;
    }

    .field small {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .field input,
    .field select {
      border-radius: 999px;
      border: 1px solid #D8D8D8;
      padding: 8px 12px;
      font-size: 14px;
      font-family: inherit;
      outline: none;
      transition: border-color 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .field input:focus,
    .field select:focus {
      border-color: var(--red);
      box-shadow: 0 0 0 1px rgba(207,44,2,0.12);
    }

    .form-actions {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-primary {
      border-radius: 999px;
      padding: 9px 18px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      background: linear-gradient(135deg, var(--red), #E85D04);
      color: #fff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      box-shadow: 0 12px 30px rgba(207,44,2,0.35);
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 40px rgba(207,44,2,0.45);
    }

    .btn-secondary {
      border-radius: 999px;
      padding: 8px 14px;
      border: 1px solid #E0E0E0;
      font-size: 13px;
      background: #FAFAFA;
      cursor: pointer;
      color: var(--ink-soft);
    }

    .result-box {
      margin-top: 12px;
      border-radius: 16px;
      background: #FFF8E6;
      border: 1px solid rgba(255,186,8,0.6);
      padding: 10px 12px;
      font-size: 13px;
      line-height: 1.4;
    }

    .result-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .result-highlight {
      font-weight: 700;
      color: var(--red);
    }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
      margin-top: 6px;
    }

    @media (max-width: 480px) {
      .result-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .result-chip {
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 999px;
      background: #FFFFFF;
      border: 1px dashed rgba(255,186,8,0.8);
      text-align: center;
    }

    .result-chip span {
      display: block;
      font-weight: 600;
    }

    .hint {
      font-size: 11px;
      color: var(--ink-soft);
      margin-top: 6px;
    }

    .error {
      font-size: 12px;
      color: #C81E1E;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header class="page-header">
      <h1 class="page-title">Калькуляторы ШАГАЙ ДОМА</h1>
      <p class="page-subtitle">
        Быстро посчитайте свой ИМТ и дневную норму калорий и КБЖУ, чтобы тренировки приносили максимум пользы.
      </p>
    </header>

    <section class="cards-grid">
      <!-- КАРТОЧКА ИМТ -->
      <article class="calc-card" data-modal-target="modal-bmi">
        <div class="calc-pill">
          <span class="pill-dot"></span> Контроль здоровья
        </div>
        <h2 class="calc-title">Калькулятор ИМТ</h2>
        <p class="calc-text">
          Узнайте индекс массы тела, чтобы понимать, где вы сейчас: дефицит, норма, лишний вес или ожирение.
        </p>
        <div class="calc-tags">
          <span class="tag">Вес и рост</span>
          <span class="tag">Мгновенный результат</span>
          <span class="tag">Рекомендации по диапазону</span>
        </div>
        <button class="calc-cta" type="button">
          <div class="calc-cta-icon">➜</div>
          Открыть калькулятор
        </button>
      </article>

      <!-- КАРТОЧКА КБЖУ -->
      <article class="calc-card" data-modal-target="modal-calories">
        <div class="calc-pill" style="background:rgba(255,186,8,0.14); color:#8A4A00;">
          <span class="pill-dot" style="background:var(--yellow);"></span> Питание и энергия
        </div>
        <h2 class="calc-title">Калькулятор калорий и КБЖУ</h2>
        <p class="calc-text">
          Посчитайте, сколько калорий, белков, жиров и углеводов вам нужно в день для похудения или поддержания веса.
        </p>
        <div class="calc-tags">
          <span class="tag">С учётом активности</span>
          <span class="tag">Под цели похудения</span>
          <span class="tag">Баланс Б/Ж/У</span>
        </div>
        <button class="calc-cta" type="button">
          <div class="calc-cta-icon">➜</div>
          Открыть калькулятор
        </button>
      </article>
    </section>
  </div>

  <!-- МОДАЛЬНОЕ ОКНО ИМТ -->
  <div class="modal" id="modal-bmi">
    <div class="modal-dialog">
      <div class="modal-header">
        <div>
          <h3 class="modal-title">Калькулятор ИМТ</h3>
          <div class="modal-subtitle">
            Индекс массы тела помогает ориентироваться, в каком диапазоне веса вы находитесь.
          </div>
        </div>
        <button class="modal-close" type="button" data-modal-close>
          ✕
        </button>
      </div>
      <div class="modal-body">
        <form id="bmiForm">
          <div class="form-grid">
            <div class="field">
              <label for="bmiWeight">Вес, кг</label>
              <input id="bmiWeight" type="number" step="0.1" min="30" max="250" required>
              <small>Введите текущий вес.</small>
            </div>
            <div class="field">
              <label for="bmiHeight">Рост, см</label>
              <input id="bmiHeight" type="number" step="1" min="120" max="220" required>
              <small>Например, 165.</small>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn-primary" type="submit">
              Рассчитать ИМТ
            </button>
            <button class="btn-secondary" type="button" id="bmiReset">
              Сбросить
            </button>
          </div>

          <div id="bmiError" class="error" style="display:none;"></div>

          <div id="bmiResult" class="result-box" style="display:none;">
            <div class="result-title">Ваш результат:</div>
            <div id="bmiResultText"></div>
            <div class="hint">
              ИМТ — это ориентир, а не приговор. В «ШАГАЙ ДОМА» мы делаем акцент на самочувствии, силе и выносливости.
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- МОДАЛЬНОЕ ОКНО КБЖУ -->
  <div class="modal" id="modal-calories">
    <div class="modal-dialog">
      <div class="modal-header">
        <div>
          <h3 class="modal-title">Калькулятор калорий и КБЖУ</h3>
          <div class="modal-subtitle">
            Примерный расчёт дневной нормы калорий и баланса Б/Ж/У под вашу цель.
          </div>
        </div>
        <button class="modal-close" type="button" data-modal-close>
          ✕
        </button>
      </div>
      <div class="modal-body">
        <form id="caloriesForm">
          <div class="form-grid">
            <div class="field">
              <label for="calSex">Пол</label>
              <select id="calSex" required>
                <option value="female" selected>Женщина</option>
                <option value="male">Мужчина</option>
              </select>
            </div>

            <div class="field">
              <label for="calAge">Возраст, лет</label>
              <input id="calAge" type="number" min="16" max="90" required>
            </div>

            <div class="field">
              <label for="calWeight">Вес, кг</label>
              <input id="calWeight" type="number" step="0.1" min="40" max="250" required>
            </div>

            <div class="field">
              <label for="calHeight">Рост, см</label>
              <input id="calHeight" type="number" step="1" min="140" max="220" required>
            </div>

            <div class="field">
              <label for="calActivity">Активность</label>
              <select id="calActivity" required>
                <option value="1.2">Мало двигаюсь (сидячая работа)</option>
                <option value="1.375">Лёгкие тренировки 1–3 раза в неделю</option>
                <option value="1.55" selected>Умеренная активность 3–5 раз в неделю</option>
                <option value="1.725">Высокая активность 6–7 раз в неделю</option>
              </select>
              <small>Можно ориентироваться на ваш ритм тренировок в «ШАГАЙ ДОМА».</small>
            </div>

            <div class="field">
              <label for="calGoal">Цель</label>
              <select id="calGoal" required>
                <option value="loss" selected>Похудеть</option>
                <option value="maintain">Поддерживать вес</option>
                <option value="gain">Набирать мышечную массу</option>
              </select>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn-primary" type="submit">
              Рассчитать норму
            </button>
            <button class="btn-secondary" type="button" id="caloriesReset">
              Сбросить
            </button>
          </div>

          <div id="caloriesError" class="error" style="display:none;"></div>

          <div id="caloriesResult" class="result-box" style="display:none;">
            <div class="result-title">Рекомендуемая дневная норма:</div>
            <div id="caloriesResultText"></div>

            <div class="result-grid" id="macrosGrid"></div>

            <div class="hint">
              Расчёт приблизительный. В реальных тренировках мы всегда ориентируемся на самочувствие, прогресс и комфорт.
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Открытие модалок
    document.querySelectorAll('.calc-card').forEach(card => {
      card.addEventListener('click', () => {
        const targetId = card.getAttribute('data-modal-target');
        const modal = document.getElementById(targetId);
        if (modal) modal.classList.add('modal--active');
      });
    });

    // Закрытие по крестику и клику по фону
    document.querySelectorAll('[data-modal-close]').forEach(btn => {
      btn.addEventListener('click', () => {
        const modal = btn.closest('.modal');
        if (modal) modal.classList.remove('modal--active');
      });
    });

    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('modal--active');
        }
      });
    });

    // --- КАЛЬКУЛЯТОР ИМТ ---
    const bmiForm = document.getElementById('bmiForm');
    const bmiError = document.getElementById('bmiError');
    const bmiResultBox = document.getElementById('bmiResult');
    const bmiResultText = document.getElementById('bmiResultText');
    const bmiResetBtn = document.getElementById('bmiReset');

    function classifyBMI(bmi) {
      if (bmi < 18.5) return 'дефицит массы тела';
      if (bmi < 25) return 'норма';
      if (bmi < 30) return 'избыточная масса тела';
      return 'ожирение';
    }

    bmiForm.addEventListener('submit', (e) => {
      e.preventDefault();
      bmiError.style.display = 'none';
      bmiResultBox.style.display = 'none';

      const weight = parseFloat(document.getElementById('bmiWeight').value.replace(',', '.'));
      const heightCm = parseFloat(document.getElementById('bmiHeight').value.replace(',', '.'));

      if (!weight || !heightCm || weight <= 0 || heightCm <= 0) {
        bmiError.textContent = 'Пожалуйста, заполните вес и рост корректными значениями.';
        bmiError.style.display = 'block';
        return;
      }

      const heightM = heightCm / 100;
      const bmi = weight / (heightM * heightM);
      const bmiRounded = bmi.toFixed(1);
      const status = classifyBMI(bmi);

      bmiResultText.innerHTML = `
        Ваш ИМТ: <span class="result-highlight">${bmiRounded}</span> — это <strong>${status}</strong>.<br>
        Оптимальный диапазон ИМТ для большинства взрослых: примерно <strong>18,5–24,9</strong>.
      `;
      bmiResultBox.style.display = 'block';
    });

    bmiResetBtn.addEventListener('click', () => {
      bmiForm.reset();
      bmiError.style.display = 'none';
      bmiResultBox.style.display = 'none';
    });

    // --- КАЛЬКУЛЯТОР КАЛОРИЙ И КБЖУ ---
    const caloriesForm = document.getElementById('caloriesForm');
    const caloriesError = document.getElementById('caloriesError');
    const caloriesResultBox = document.getElementById('caloriesResult');
    const caloriesResultText = document.getElementById('caloriesResultText');
    const macrosGrid = document.getElementById('macrosGrid');
    const caloriesResetBtn = document.getElementById('caloriesReset');

    function calcBMR({ sex, weight, height, age }) {
      // Формула Миффлина — Сан Жеора
      if (sex === 'female') {
        return 10 * weight + 6.25 * height - 5 * age - 161;
      } else {
        return 10 * weight + 6.25 * height - 5 * age + 5;
      }
    }

    caloriesForm.addEventListener('submit', (e) => {
      e.preventDefault();
      caloriesError.style.display = 'none';
      caloriesResultBox.style.display = 'none';
      macrosGrid.innerHTML = '';

      const sex = document.getElementById('calSex').value;
      const age = parseInt(document.getElementById('calAge').value, 10);
      const weight = parseFloat(document.getElementById('calWeight').value.replace(',', '.'));
      const height = parseFloat(document.getElementById('calHeight').value.replace(',', '.'));
      const activity = parseFloat(document.getElementById('calActivity').value);
      const goal = document.getElementById('calGoal').value;

      if (!age || !weight || !height || age <= 0 || weight <= 0 || height <= 0) {
        caloriesError.textContent = 'Проверьте корректность введённых данных: возраст, вес и рост.';
        caloriesError.style.display = 'block';
        return;
      }

      const bmr = calcBMR({ sex, weight, height, age });
      const tdee = bmr * activity; // базовый расход с учётом активности

      let targetCalories = tdee;
      let goalText = 'поддержания текущего веса';

      if (goal === 'loss') {
        targetCalories = tdee * 0.85; // ~15% дефицит
        goalText = 'комфортного похудения';
      } else if (goal === 'gain') {
        targetCalories = tdee * 1.15; // ~15% профицит
        goalText = 'набора массы';
      }

      const calRounded = Math.round(targetCalories);

      // Примерное распределение БЖУ: 30% белки, 30% жиры, 40% углеводы
      const proteinKcal = calRounded * 0.30;
      const fatKcal = calRounded * 0.30;
      const carbKcal = calRounded * 0.40;

      const proteinGr = Math.round(proteinKcal / 4);
      const fatGr = Math.round(fatKcal / 9);
      const carbGr = Math.round(carbKcal / 4);

      caloriesResultText.innerHTML = `
        Примерная норма для <strong>${goalText}</strong> — 
        <span class="result-highlight">${calRounded} ккал</span> в день.
      `;

      macrosGrid.innerHTML = `
        <div class="result-chip">
          <span>${proteinGr} г</span>
          белки
        </div>
        <div class="result-chip">
          <span>${fatGr} г</span>
          жиры
        </div>
        <div class="result-chip">
          <span>${carbGr} г</span>
          углеводы
        </div>
      `;

      caloriesResultBox.style.display = 'block';
    });

    caloriesResetBtn.addEventListener('click', () => {
      caloriesForm.reset();
      caloriesError.style.display = 'none';
      caloriesResultBox.style.display = 'none';
      macrosGrid.innerHTML = '';
    });
  </script>
</body>
</html>
